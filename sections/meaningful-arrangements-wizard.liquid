<div class="meaningful-arrangements-wizard">

	<div class="stepper">
        <ul class="nav nav-tabs hidden" role="tablist">
          <li role="presentation" class="active">
            <a class="persistant-disabled" href="#stepper-step-1" data-toggle="tab" aria-controls="stepper-step-1" role="tab" title="Question 1">
              <span class="round-tab">1</span>
            </a>
          </li>
          <li role="presentation" class="disabled">
            <a class="persistant-disabled" href="#stepper-step-2" data-toggle="tab" aria-controls="stepper-step-2" role="tab" title="Question 2">
              <span class="round-tab">2</span>
            </a>
          </li>
          <li role="presentation" class="disabled">
            <a class="persistant-disabled" href="#stepper-step-3" data-toggle="tab" aria-controls="stepper-step-3" role="tab" title="Question 3">
              <span class="round-tab">3</span>
            </a>
          </li>
          <li role="presentation" class="disabled">
            <a class="persistant-disabled" href="#stepper-step-4" data-toggle="tab" aria-controls="stepper-step-4" role="tab" title="Question 4">
              <span class="round-tab">4</span>
            </a>
          </li>
          <li role="presentation" class="disabled">
            <a class="persistant-disabled" href="#stepper-step-5" data-toggle="tab" aria-controls="stepper-step-5" role="tab" title="Question 5">
              <span class="round-tab">5</span>
            </a>
          </li>
          <li role="presentation" class="disabled">
            <a class="persistant-disabled" href="#stepper-step-6" data-toggle="tab" aria-controls="stepper-step-6" role="tab" title="Question 6">
              <span class="round-tab">6</span>
            </a>
          </li>
          <li role="presentation" class="disabled">
            <a class="persistant-disabled" href="#stepper-step-7" data-toggle="tab" aria-controls="stepper-step-7" role="tab" title="Question 7">
              <span class="round-tab">7</span>
            </a>
          </li>
          <li role="presentation" class="disabled">
            <a class="persistant-disabled" href="#stepper-step-8" data-toggle="tab" aria-controls="stepper-step-8" role="tab" title="Question 8">
              <span class="round-tab">7</span>
            </a>
          </li>
        </ul>

        {% form 'contact' %}
           {{ form.errors | default_errors }}
          
          {% if form.posted_successfully? %}
            <p class="note form-success">
              {{ 'contact.form.post_success' | t }} <br />
              We will redirect you to checkout page in a 1-3 seconds
              Click <a id="submitBtn" href="/cart/28690565890100:1">here</a> if you are not redirected.
              Thanks.
            </p>
          {% endif %}
          <div class="tab-content">
            <div class="tab-pane fade in active" role="tabpanel" id="stepper-step-1">
                <h2>The letter crafter&trade;</h2>
  
                <h2> 1 of 7 </h2>

                <h2 class="question"> Who is receiving this letter and flowers? </h2>
            <label for="{{ block.settings.label }}" class="label">{{ block.settings.label }}</label>
            <textarea rows="10" cols="100" id="Form-{{ section.id }}" class="contactFormMessage" name="contact[first-answer]" placeholder="Answer"></textarea>
              <ul class="list-inline pull-right">
                <li>
                	<a class="btn right hidden uppercase">Cancel</a>
                </li>
                <li>
                  <a class="btn right uppercase next-step">Next {{ 'arrow-right-icon.png' | asset_url | img_tag }} </a>
                </li>
              </ul>
            </div>
            <div class="tab-pane fade" role="tabpanel" id="stepper-step-2">
                <h2>The letter crafter&trade;</h2>
  
                <h2> 2 of 7 </h2>

                <h2 class="question"> What's the ocassion or relationship that you have with this person? </h2>
            <p class="error-message hidden">Field is reqired</p>
            <label for="{{ block.settings.label }}" class="label">{{ block.settings.label }}</label>
            <textarea rows="10" id="reqiureAnswer" cols="100" id="Form-{{ section.id }}" class="contactFormMessage required" name="contact[second-answer]" placeholder="Answer (required)"></textarea>
              <ul class="list-inline pull-right">
                <li>
                <a class="btn right uppercase prev-step">Back</a>
                </li>
                <li>
                  <a id="reqiureAnswerButton" class="btn right uppercase next-step">Next {{ 'arrow-right-icon.png' | asset_url | img_tag }} </a>
                </li>
              </ul>
            </div>
            <div class="tab-pane fade" role="tabpanel" id="stepper-step-3">
                <h2>The letter crafter&trade;</h2>
  
                <h2> 3 of 7 </h2>

                <h2 class="question"> Does the person have any hobbies, favorite places for shopping. How dow he/she love to spend his/her time? </h2>
            <label for="{{ block.settings.label }}" class="label">{{ block.settings.label }}</label>
            <textarea rows="10" cols="100" id="Form-{{ section.id }}" class="contactFormMessage" name="contact[third-answer]" placeholder="Answer"></textarea>
              <ul class="list-inline pull-right">
                <li>
                <a class="btn right uppercase prev-step">Back</a>
                </li>
                <li>
                  <a class="btn right uppercase next-step">Next {{ 'arrow-right-icon.png' | asset_url | img_tag }} </a>
                </li>
              </ul>
            </div>
            <div class="tab-pane fade" role="tabpanel" id="stepper-step-4">
               <h2>The letter crafter&trade;</h2>
  
                <h2> 4 of 7 </h2>

                <h2 class="question"> Any color he/she hates or loves?  </h2>
            <label for="{{ block.settings.label }}" class="label">{{ block.settings.label }}</label>
            <textarea rows="10" cols="100" id="Form-{{ section.id }}" class="contactFormMessage" name="contact[fourth-answer]" placeholder="Answer"></textarea>
              <ul class="list-inline pull-right">
                <li>
                <a class="btn right uppercase prev-step">Back</a>
                </li>
                <li>
                  <a class="btn right uppercase next-step">Next {{ 'arrow-right-icon.png' | asset_url | img_tag }} </a>
                </li>
              </ul>
            </div>
           	<div class="tab-pane fade" role="tabpanel" id="stepper-step-5">
               <h2>The letter crafter&trade;</h2>
  
                <h2> 5 of 7 </h2>

                <h2 class="question"> Are there any places (countries, regions) that are important to the person (or to you both)? A place of birth, of travel, where you've gone together? </h2>
            <label for="{{ block.settings.label }}" class="label">{{ block.settings.label }}</label>
            <textarea rows="10" cols="100" id="Form-{{ section.id }}" class="contactFormMessage" name="contact[fifth-answer]" placeholder="Answer"></textarea>
              <ul class="list-inline pull-right">
                <li>
                <a class="btn right uppercase prev-step">Back</a>
                </li>
                <li>
                  <a class="btn right uppercase next-step">Next {{ 'arrow-right-icon.png' | asset_url | img_tag }} </a>
                </li>
              </ul>
            </div>
           	<div class="tab-pane fade" role="tabpanel" id="stepper-step-6">
               <h2>The letter crafter&trade;</h2>
  
                <h2> 6 of 7 </h2>

                <h2 class="question"> What words best describe the person? Examples might include: compassion, playful, funny, loving, gentle.  </h2>
            <label for="{{ block.settings.label }}" class="label">{{ block.settings.label }}</label>
            <textarea rows="10" cols="100" id="Form-{{ section.id }}" class="contactFormMessage" name="contact[sixth-answer]" placeholder="Answer"></textarea>
              <ul class="list-inline pull-right"
                <li>
                <a class="btn right uppercase prev-step">Back</a>
                </li>
                <li>
                  <a class="btn right uppercase next-step">Next {{ 'arrow-right-icon.png' | asset_url | img_tag }} </a>
                </li>
              </ul>
            </div>
            <div class="tab-pane fade" role="tabpanel" id="stepper-step-7">
               <h2>The letter crafter&trade;</h2>
  
                <h2> 7 of 7 </h2>

                <h2 class="question"> If you could tell this person one thing, or sum her/him up with one story, what would it be? </h2>
            <label for="{{ block.settings.label }}" class="label">{{ block.settings.label }}</label>
            <textarea rows="10" cols="100" id="Form-{{ section.id }}" class="contactFormMessage" name="contact[seventh-answer]" placeholder="Answer"></textarea>
              <ul class="list-inline pull-right">
                <li>
                <a class="btn right uppercase prev-step">Back</a>
                </li>
                <li>
                  <a class="btn right uppercase next-step">Next {{ 'arrow-right-icon.png' | asset_url | img_tag }} </a>
                </li>
              </ul>
            </div>
            <div class="tab-pane fade" role="tabpanel" id="stepper-step-8">
               <h2>The letter crafter&trade;</h2>
  	
                <h2 class="question">Almost Well done </h2>
              <p class="error-message">All fields are reqired</p>
              <label for="ContactFormName">{{ 'contact.form.name' | t }}</label>
              <input class="required" type="text" id="ContactFormName" name="contact[name]" value="{% if form[name] %}{{ form[name] }}{% elsif customer %}{{ customer.name }}{% endif %}">
              <label for="ContactFormEmail" class="{% if form.errors contains 'email' %}label--error{% endif %}">{{ 'contact.form.email' | t }}</label>
              <input class="required"  type="email" id="ContactFormEmail" name="contact[email]" autocorrect="off" autocapitalize="off" value="{% if form.email %}{{ form.email }}{% elsif customer %}{{ customer.email }}{% endif %}" class="{% if form.errors contains 'email' %}input--error{% endif %}">
              <ul class="list-inline pull-right">
                <li>
                <a class="btn right uppercase prev-step">Back</a>
                </li>
                <li>
                  <a href="/cart/28690565890100:1" class="hidden" id="submitBtn" class="btn right uppercase next-step">Purchase</a>
                  <input type="submit" class="btn right uppercase next-step" value="{{ 'contact.form.submit' | t }}">
                </li>
              </ul>
            </div>             
          </div>
        {% endform %}
	</div>
  
</div>

{% schema %}
  {
    "name": "Meaningful Arrangements",
    "class": "index-section",
    "settings": [

    {
      "type": "header",
      "content": "Page content"
    },
    {
      "type": "header",
      "content": "Custom Form",
      "info": "Add form fields with content section below. Tip: Add required Email field and Body field again to change sort position."
    }
    ],
    "blocks": [
      {
        "type": "body",
        "name": "Body field - required",
        "limit": 1,
        "settings": [
          {
            "type": "textarea",
            "id": "label",
            "label": "Label",
            "default": "Message",
            "info": "The label cannot be left blank."
          }
        ]
      },

      {
        "type": "text",
        "name": "Text field",
        "settings": [
          {
            "type": "text",
            "id": "label",
            "label": "Label",
            "default": "Full Name",
            "info": "Use for any single line form input. The label cannot be left blank."
          }
        ]
      },

      {
        "type": "textHeading",
        "name": "Heading field",
        "settings": [
          {
            "type": "text",
            "id": "label",
            "label": "Label",
            "default": "Heading",
            "info": "The label cannot be left blank."
          }
        ]
      },
      {
        "type": "textarea",
        "name": "Text area",
        "settings": [
          {
            "type": "textarea",
            "id": "label",
            "label": "Label",
            "default": "Enter your message",
            "info": "Use for multi-line form input. The label cannot be left blank."
          }
        ]
      }
    ],
    "presets": [
      {
        "name": "Meaningful Arrangements",
        "category": "Form",
        "blocks": [
          {
            "type": "body"
          }
        ]
      }
    ]
  }
{% endschema %}



{% javascript %}



if(location.href.includes('contact_posted=true')) {
    let element = document.getElementById('submitBtn');
	let form = document.querySelector('.tab-content');
	form.style.display = "none";
    element.click();
}


/*jslint browser: true*/
/*global $, jQuery, alert*/
(function($) {
    'use strict';


    $(function() {

        $(document).ready(function() {
            function triggerClick(elem) {
                $(elem).click();
            }


            var $hrefbrn = $('#submitBtn'),
				$progressWizard = $('.stepper'),
                $tab_active,
                $tab_prev,
                $tab_next,
                $btn_prev = $progressWizard.find('.prev-step'),
                $btn_next = $progressWizard.find('.next-step'),
                $tab_toggle = $progressWizard.find('[data-toggle="tab"]'),
                $tooltips = $progressWizard.find('[data-toggle="tab"][title]');

            // To do:
            // Disable User select drop-down after first step.
            // Add support for payment type switching.
			// Redirect uppon submission after 1 sec
			// Redirect are here


            //Initialize tooltips
            $tooltips.tooltip();

            //Wizard
            $tab_toggle.on('show.bs.tab', function(e) {
                var $target = $(e.target);
                if (!$target.parent().hasClass('active, disabled')) {
                    $target.parent().prev().addClass('completed');
                }
                if ($target.parent().hasClass('disabled')) {
                    return false;
                }
            });

            $btn_next.on('click', function(e) {
				var $target = $(e.target);
                $tab_active = $progressWizard.find('.active');
				if($tab_active.find('textarea').hasClass('required') && !$tab_active.find('textarea').val()) {
					$target.attr('disabled', 'true');
					$tab_active.find('.error-message').removeClass('hidden');
					return;
				}
				
                $tab_active.next().removeClass('disabled');
                $tab_next = $tab_active.next().find('a[data-toggle="tab"]');
                triggerClick($tab_next);

            });
            $btn_prev.click(function() {
                $tab_active = $progressWizard.find('.active');
                $tab_prev = $tab_active.prev().find('a[data-toggle="tab"]');
                triggerClick($tab_prev);
            });
        });
    });

}(jQuery, this));
  

{% endjavascript %}

